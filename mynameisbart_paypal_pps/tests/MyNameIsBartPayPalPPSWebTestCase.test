<?php

/**
 * @file
 * Contains class MyNameIsBartPayPalPPSWebTestCase.
 */

/**
 * Contains PayPal PPS testing helpers.
 */
class MyNameIsBartPayPalPPSWebTestCase extends DrupalWebTestCase {

  /**
   * Checks if a payment method's controller data exists in the database.
   *
   * @param MyNameIsBartPayPalPPSPaymentMethodController $payment_method
   *
   * @return bool
   */
  function paymentMethodControllerDataExists(PaymentMethod $payment_method) {
    $query = db_select('mynameisbart_paypal_pps_payment_method', 'mpppm');
    $values = $payment_method->controller_data + $payment_method->controller->controller_data_defaults;
    foreach ($values as $property => $value) {
      $query->condition($property, $value);
    }
    $count = $query->countQuery()->execute()->fetchField();

    return (bool) $count;
  }
}
