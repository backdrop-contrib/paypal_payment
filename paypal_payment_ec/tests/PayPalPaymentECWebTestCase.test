<?php

/**
 * @file
 * Contains class PayPalPaymentECWebTestCase.
 */

/**
 * Contains PayPal EC testing helpers.
 */
class PayPalPaymentECWebTestCase extends DrupalWebTestCase {

  /**
   * Checks if a payment method's controller data exists in the database.
   *
   * @param PayPalPaymentECPaymentMethodController $payment_method
   *
   * @return bool
   */
  function paymentMethodControllerDataExists(PaymentMethod $payment_method) {
    $query = db_select('paypal_payment_ec_payment_method', 'mpppm');
    $values = $payment_method->controller_data + $payment_method->controller->controller_data_defaults;
    foreach ($values as $property => $value) {
      $query->condition($property, $value);
    }
    $count = $query->countQuery()->execute()->fetchField();

    return (bool) $count;
  }
}
